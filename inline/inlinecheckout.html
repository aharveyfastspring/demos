
<html>
   <head>
      <link rel="stylesheet" href="democss.css">
      <script
         id="fsc-api"
         src="https://d1f8f9xcsvx3ha.cloudfront.net/sbl/TNP-10608/fastspring-builder.js"
         type="text/javascript"
         data-storefront="aharveyqa.test.qa1.onfastspring.com/inline-aharvey"
         data-data-callback="dataCallback"
         data-continuous="true"></script>
   </head>
   <style>
      .flex_container {
        display: flex;
        width: 100%;
        height: 100vh;
  	gap: 15%;
      }
      .flex_item_left {
         flex: 1;
	 background-color: whiteSmoke; 
	 border-radius: 25px;
      }
      .flex_item_right {
         width: 450px;
      }
   </style>
   
   <body>
      <div class="flex_container">
         <div class="flex_item_left">
            <h1>Inline Checkout Test</h1>
            <br />
            
            <h2>Shopping Cart Contents</h2>
            
            <!-- Shopping Cart -->
            <div id="cartContents"></div>
         
         </div>
         <div class="flex_item_right">
            <div id="fsc-inline-checkout-container">
            </div>
         </div>
      </div>

      
      <script>
         
         // Print the contents of the callback payload
         
          function dataCallback(data) {
             
              // Initiate the InLine checkout
              fastspring.builder.checkout();
             
             console.log(JSON.stringify(data, null, 4));
             
             // Loop over the order session to retreive and display the contents
             
            if (data && data.hasOwnProperty('groups')) {
                const {
                    groups
                } = data;
                groups.forEach(group => {
                    if (group.items && Array.isArray(group.items)) {
                        group.items.forEach(item => {
                        
                           if (item.selected) {
                              
                                 // Product name and quantity
                                 var cartItemListing = document.createElement("div");
                                 
                                 // Product Name
                                 var itemNameSpan = document.createElement("span");
                                 itemNameSpan.className = "cartProductName";
                                 var productName = document.createTextNode(item.display);
                                 itemNameSpan.appendChild(productName);
				   
                                 // Item Quantity
                                 var itemQuantity = document.createTextNode(" x " + item.quantity);
                                 
                                 cartItemListing.appendChild(itemNameSpan);
                                 cartItemListing.appendChild(itemQuantity);
                                 
                                 var element = document.getElementById("cartContents");
                                 element.appendChild(cartItemListing);
                                 
                                 // Item total
                                 var divTag = document.createElement("div");
                                 divTag.className = "cartItemTotal";
                                 var itemTotal = document.createTextNode(item.total);
                                 divTag.appendChild(itemTotal);
                                 var element = document.getElementById("cartContents");
                                 element.appendChild(divTag);
                              
                                 // New Line
                                 var brTag = document.createElement("br");
                                 var element = document.getElementById("cartContents");
                                 element.appendChild(brTag);
                                                            
                           }
                        });
                    }
                });
               
			   	// Order total
                var hrTag = document.createElement("hr");
                var element = document.getElementById("cartContents");
                element.appendChild(hrTag);
				
                var divTag = document.createElement("div");
                divTag.className = "cartItemTotal";
                var itemTotal = document.createTextNode("Order Total: " + data.total);
                divTag.appendChild(itemTotal);
                var element = document.getElementById("cartContents");
                element.appendChild(divTag);
            }
            }
      </script>
      
      
   </body>
</html>
