
<html>
   <head>
      <link rel="stylesheet" href="democss.css">
      <script
         id="fsc-api"
         src="https://d1f8f9xcsvx3ha.cloudfront.net/sbl/TNP-10608/fastspring-builder.js"
         type="text/javascript"
         data-storefront="aharveyqa.test.qa1.onfastspring.com/inline-aharvey"
         data-data-callback="dataCallback"
         data-continuous="true"></script>
   </head>
   <style>
      * {
      box-sizing: border-box;
      }
      .row {
      display: flex;
      height: 100vh;
      }
      .column {
      flex: 50%;
      padding: 10px;
      }
   </style>
   
   <body>
      <div class="row">
         <div class="column">
            <h1>Inline Checkout Test</h1>
            <br />
            
            <h2>Shopping Cart Contents</h2>
            
            <!-- Shopping Cart -->
            <div id="cartContents"></div>
         
         </div>
         <div class="column">
            <div id="fsc-inline-checkout-container">
            </div>
         </div>
      </div>

      
      <script>
         
         // Print the contents of the callback payload
         
          function dataCallback(data) {
             
              // Initiate the InLine checkout
              fastspring.builder.checkout();
             
             console.log(JSON.stringify(data, null, 4));
             
             // Loop over the order session to retreive and display the contents
             
            if (data && data.hasOwnProperty('groups')) {
                const {
                    groups
                } = data;
                groups.forEach(group => {
                    if (group.items && Array.isArray(group.items)) {
                        group.items.forEach(item => {
                        
                           if (item.selected) {
                              
                                 // Product name and quantity
                                 var divTag = document.createElement("div");
                                 divTag.className = "cartProductName";
                                 var productName = document.createTextNode(item.display + " x " + item.quantity);
                                 divTag.appendChild(productName);
                                 var element = document.getElementById("cartContents");
                                 element.appendChild(divTag);
                           
                                 // Item total
                                 var divTag = document.createElement("div");
                                 divTag.className = "cartItemTotal";
                                 var itemTotal = document.createTextNode(item.total);
                                 divTag.appendChild(itemTotal);
                                 var element = document.getElementById("cartContents");
                                 element.appendChild(divTag);
                              
                                 // New Line
                                 var brTag = document.createElement("br");
                                 var element = document.getElementById("cartContents");
                                 element.appendChild(brTag);
                                                            
                           }
                        });
                    }
                });
            }
            }
      </script>
      
      
   </body>
</html>
